@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


<div class="tab-container mt-3" style="width: 100% ;">
    <div class="group-data-action-container d-flex justify-content-between">
        <div class="d-flex align-items-center">
            <a class="ms-2 me-3" href="# ">
                <i class="bi bi-person-check-fill"></i>
            </a>
            <a class="me-3" href="#"><i class="bi bi-pencil-square"></i></a>
            <a class="me-3" href="#"> <i class="bi bi-trash-fill"></i></a>
            <a class="me-3" href="#"><i class="bi bi-arrow-down-circle-fill"></i></a>
            <a class="me-3" href="#"> <i class="bi bi-gear-fill"></i></a>

            <button class="btn btn-color group-button" data-bs-toggle="modal" data-bs-target="#groupModal" id="groupPopup">Group Button</button>
        </div>
        <div class="d-flex ">
           <input type="text" placeholder="Search..." style="padding:5px"/>
        </div>
    </div>
    <div class="me-1" style="overflow-x:auto !important;">
        <table class="table  mt-3">
            <thead>
                <tr>
                    <th></th>
                    <th>PickUp</th>
                    <th>Delivery</th>
                    <th>Recipient</th>
                    <th>Crew Commander</th>
                    <th>Lead Vehicle</th>
                    <th>Chase Vehicle</th>
                    <th>Time</th>
                    <th>Status</th>
                    <th>Type</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Standing Order Header -->
                <tr class="order-header">
                    <td colspan="11" class="subheader-cell" style="background:#d9d9db !important; ">Standing Order</td>
                </tr>

                <!-- First Order -->
                <tr class="order-subheader">
                    <td colspan="11" class="standing-order-no">T935265</td>
                </tr>
                <tr class="table-border">
                    <td><input type="checkbox" class="row-checkbox"></td>
                    <td>Connaught Place, Delhi</td>
                    <td>Chandni Chowk, Delhi</td>
                    <td>ABC Bank, Chandni</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>10:00 AM</td>
                    <td>Unassigned</td>
                    <td>ATM</td>
                    <td><a href="#"><i class="bi bi-pencil-square"></i></a></td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="row-checkbox"></td>
                    <td>Karol Bagh, Delhi</td>
                    <td>Chandni Chowk, Delhi</td>
                    <td>ABC Bank, Chandni</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>Unassigned</td>
                    <td>ATM</td>
                    <td><a href="#"><i class="bi bi-pencil-square"></i></a></td>
                </tr>

                <!-- Second Order -->
                <tr class="order-subheader">
                    <td colspan="11" class="standing-order-no">T235483</td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="row-checkbox"></td>
                    <td>MG Road, Bengaluru</td>
                    <td>Koramangala, Bengaluru</td>
                    <td>XYZ Pvt Ltd, Koram</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>11:30 AM</td>
                    <td>Unassigned</td>
                    <td>CIT</td>
                    <td><a href="#"><i class="bi bi-pencil-square"></i></a></td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="row-checkbox"></td>
                    <td>Indiranagar</td>
                    <td>Jayanagar</td>
                    <td>XYZ Pvt Ltd, Koram</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>Unassigned</td>
                    <td>CIT</td>
                    <td><a href="#"><i class="bi bi-pencil-square"></i></a></td>
                </tr>

                <!-- Scheduled Order Header -->
                <tr class="order-header">
                    <td colspan="11" class="subheader-cell" style="background:#d9d9db !important; ">Scheduled Order</td>
                </tr>


                <tr>
                    <td><input type="checkbox" class="row-checkbox"></td>
                    <td>Marine Drive, Mumbai</td>
                    <td>Fort, Mumbai</td>
                    <td>DEF Corp, Fort</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>1:15 PM</td>
                    <td>Unassigned</td>
                    <td>CIT</td>
                    <td><a href="#"><i class="bi bi-pencil-square"></i></a></td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="row-checkbox"></td>
                    <td>Salt Lake, Kolkata</td>
                    <td>Howrah, Kolkata</td>
                    <td>GHI Bank, Howrah</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>3:00 PM</td>
                    <td>Unassigned</td>
                    <td>Airlift</td>
                    <td><a href="#"><i class="bi bi-pencil-square"></i></a></td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="row-checkbox"></td>
                    <td>Anna Nagar, Chennai</td>
                    <td>T Nagar, Chennai</td>
                    <td>JKL Ltd, T Nagar</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>9:45 AM</td>
                    <td>Unassigned</td>
                    <td>ATM</td>
                    <td><a href="#"><i class="bi bi-pencil-square"></i></a></td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="row-checkbox"></td>
                    <td>Sector 18, Noida</td>
                    <td>Sector 62, Noida</td>
                    <td>MNO Inc, Sec 62</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>2:30 PM</td>
                    <td>Unassigned</td>
                    <td>CIT</td>
                    <td><a href="#"><i class="bi bi-pencil-square"></i></a></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>








<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="groupModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg ">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="groupModalLabel" style="font-size:14px !important">Selected Orders</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="ms-4 mt-4" style="font-size:14px !important">
                <span>Group Name : </span>
                <input type="text" placeholder="Enter Group..." style="padding:0px 3px" />
            </div>
            <div class="modal-body" id="modal-content" style="overflow-x:auto">
                <table class="table table-bordered" style="font-size:12px !important">
                    <thead>
                        <tr>
                            <th>PickUp</th>
                            <th>Delivery</th>
                            <th>Recipient</th>

                            <th>Time</th>
                            <th>Status</th>
                            <th>Type</th>
                        </tr>
                    </thead>
                    <tbody id="selectedOrdersTableBody">
                        <!-- Selected orders will be added here dynamically -->
                    </tbody>
                </table>
            </div>
            <div class="modal-footer d-flex justify-content-between">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="font-size:14px !important">Close</button>
                <a type="button" class="btn btn-color" asp-action="GroupData" style="font-size:14px !important">Save</a>
            </div>
        </div>
    </div>
</div>

<script>
    document.querySelector('.group-button').addEventListener('click', function () {
        $("[id*=groupPopup]").click(function () {
            $('#myModal').modal('show');
        });

        const selectedOrdersTableBody = document.getElementById('selectedOrdersTableBody');
        selectedOrdersTableBody.innerHTML = ''; // Clear the table body

        // Gather selected data
        document.querySelectorAll('.row-checkbox:checked').forEach(function (checkbox) {
            const row = checkbox.closest('tr');
            const pickup = row.cells[1].textContent;
            const delivery = row.cells[2].textContent;
            const recipient = row.cells[3].textContent;

            const time = row.cells[7].textContent;
            const status = row.cells[8].textContent;
            const type = row.cells[9].textContent;

            // Create table row for each selected row
            const tableRow = document.createElement('tr');
            tableRow.innerHTML = `
                        <td>${pickup}</td>
                        <td>${delivery}</td>
                        <td>${recipient}</td>

                        <td>${time}</td>
                        <td>${status}</td>
                        <td>${type}</td>
                    `;
            selectedOrdersTableBody.appendChild(tableRow);
        });
    });
</script>

